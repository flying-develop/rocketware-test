## Функционал для неавторизованных пользователей

- **/api/auth/login** - роут для авторизации через email или телефон<br><br>

   Обязательные параметры:
   <ul>
       <li><b>login</b> - Email/Телефон</li>
       <li><b>password</b> - Пароль</li>
   </ul><br/>

   На успешную авторизацию возвращается JSON:
        
   <ul>
        <li><b>access_token</b> - Bearer токен для подписи запросов</li>
        <li><b>expires_in</b> - срок действия токена в секундах</li>
        <li><b>user</b> - информация об авторизованном пользователе</li>
   </ul><br/>
  
    За логику авторизации отвечает **SignInController**
    <ul>
        <li><b>LoginRequest</b> - валидирует данные</li>
        <li><b>LoginUserAction</b> - авторизует пользователя и возвращает токен</li>
    </ul><br/></br>

- **/api/auth/register** - роут для регистрации пользователей<br><br>

  Обязательные параметры:
   <ul>
       <li><b>name</b> - ФИО</li>
       <li><b>email</b> - Эл. почта</li>
        <li><b>phone</b> - Телефон в формате +79999999999</li>
        <li><b>password</b> - Пароль, минимум 6 символов, должен содержать только латинские буквы и спецсимволы $%&!:. (мининимум 1 буква в нижнем регистре, 1 буква в верхнем регистре, 1 спецсимвол)</li> 
        <li><b>password_confirmation</b> - подтверждение пароля</li> 
  </ul><br/>

  На успешную регистрацию возвращается JSON:

   <ul>
        <li><b>access_token</b> - Bearer токен для подписи запросов</li>
        <li><b>expires_in</b> - срок действия токена в секундах</li>
        <li><b>user</b> - информация об созданном пользователе</li>
   </ul><br/>

  За логику регистрации отвечает **SignUpController**
    <ul>
        <li><b>RegisterRequest</b> - валидирует данные</li>
        <li><b>RegisterUserAction</b> - создает пользователя и возвращает токен</li>
    </ul>

## Функционал для авторизованного пользователя
- роут **/api/catalog** - возвращает JSON с отфильтрованными товарами с пагинацией
- Авторизация проверяется с помощью **JWT** (tymon/jwt-auth)
- Для модели **Product** создан свой **Eloquent Builder** для реализации метода **filtered**
- Для фильтрации используется **Pipeline**, который меняет запрос в зависимости от **FilterManager** в котором инициализируются invoke-классы для фильтрации
- Для инициализации классов с фильтрами создан мидлвар **Filter**, в котором в зависимости от роута должы подключаться те или иные классы-обработчики

Для автоматизации настроен сидер и код покрыт юнит-тестами